# 需求目的

---

1. 实现一个能够实现 视频理解 的 MCP 服务

## 核心功能

---

1. 视频理解
   - 输入：视频 URL
   - 输出：
     - 视频的关键词(从接口请求的summary中，提取出关键词，然后返回一个关键词的数组)
     - 视频的摘要信息(从接口请求的summary中，提取出摘要信息，然后返回一个摘要信息的字符串)
     - 视频的关键时间点及内容(从接口请求的 chapters 中获取,chapters 是一个数组,每个元素是一个对象,对象的 contents 是一个数组,数组中每个元素是一个对象,对象的 start 和 end 是时间点,summary 是摘要信息)

2. 思维导图
   - 输入：关键词 视频的摘要信息 视频的关键时间点及内容
   - 输出：
     - 思维导图的 JSON 格式
     - 用 [markmap](https://github.com/dundalek/markmap/tree/master) 生成思维导图的图片

     - [JSON格式例子](https://github.com/dundalek/markmap/blob/master/examples/data/tree.json)

   - 特殊需求：
     - 生成思维导图的 JSON 格式功能由deepseek 来完成，通过openai 的接口形式去调用deepseek 的接口，prompt 如下：
       - 请根据视频的关键词、视频的摘要信息、视频的关键时间点及内容，生成一个思维导图的 JSON 格式，以下是一个例子：
         ```json
        (读取tree.json的内容进行填充)
        ```


## 技术要求

---

1. 使用 Node.js
2. 使用 javaScript
3. 阅读[node_mcp](@node_mcp)的 doc，根据示例文档来进行代码初始化
4. 使用 Pnpm 来管理项目
5. 要有详细的 ReadMe 文档
   - 包含 MCP 服务的安装方式

## 服务配置

---

env 参数配置{
"BILIGPT_API_KEY": "biligpt 的 apikey",
"DEEPSEEK_API_KEY": "deepseek 的 apikey",
}

## 特殊需求

---

请求代码

```javascript
const options = { method: "GET" };

fetch(
  "https://api.bibigpt.co/api/open/IV54gysCtes7/chapter-summary?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1HFd6YhErb%2F%3Fspm_id_from%3D333.337.search-card.all.click",
  options
)
  .then((response) => response.json())
  .then((response) => console.error(response))
  .catch((err) => console.error(err));
```

相应代码

```ResfulAPI
{"success":true,"id":"BV1HFd6YhErb","service":"bilibili","sourceUrl":"https://www.bilibili.com/video/BV1HFd6YhErb","htmlUrl":"https://bibigpt.co/video/BV1HFd6YhErb","costDuration":494,"author":"秋芝2046","cover":"http://i2.hdslb.com/bfs/archive/1f41551130838c55ba0d4d28e166cf90739259a1.jpg","remainingTime":75262,"overallSummary":"本教程面向小白用户，旨在帮助他们利用MCP（一种协议和工具集合）让AI自动完成任务。教程介绍了如何配置和使用MCP，包括下载软件、配置服务、以及在Cursor等聊天界面中启用。通过MCP，AI可以实现诸如生成快讯日报、批量重命名文件、抓取网页信息、操作Blender和数据库等功能。教程强调实用性，并建议新手使用通用工具和官方服务，避免非npx方式，同时提醒注意社区MCP服务可能存在的不稳定性和安全风险，例如投毒事件。最后，鼓励用户适度学习和交流，并关注官方进展。\n","overallTitle":"🎉 MCP 自动化入门指南\n","chapters":[{"contents":[[0,47.46,"帮我根据今天的知乎热榜写一个快讯日报，然后发送给这些人。当当给我K盘里的文件名都按顺序改成秋之一、秋之二这样的格式，再把非偏辑的文件都删除。拜帮我去看看这个人的主页，把它的播放量和标题都记下来，再做一个网站展示出来。哇哦嘿嘿，让你只能聊天的AI爱动起手来吧。这就是大名鼎鼎的来自cloud母公司anthroic的mp。不过小白朋友不用担心，今天没有晦涩的讲解，这一期的目的就是实实在在的让草履虫都能用它的一颗细胞轻松体验上的，而且是几个实用的工具。"]],"start":0,"end":47.46,"title":"🎉 Claude AI 自动化入门","summary":"这篇教程旨在帮助小白用户轻松上手 Anthropic 的 Claude AI，让 AI 自动完成一些任务。具体包括：根据知乎热榜生成快讯日报并发送给指定人群；批量重命名文件并删除指定文件；抓取用户主页的播放量和标题并制作网站展示。教程强调实用性，无需专业知识即可轻松体验。"},{"contents":[[49.1,102.28,"今天我们仅仅需要知道mp本身是一个协议，它协议具体规定了啥咱不管，反正很多开发者都基于这个协议开发了一些工具，统一都叫做mp server mcp服务。这些mcp工具只需要我们简单的配置一下，就能通过mcp协议跟大模型连接起来，放在了大模型的工具箱里。大模型就能自己在合适的时候去挑选工具，自己用起来，什么操作blender啊，操作数据库、山库跑路都是。那其实想用上M P只需三步，做完这三步，你的AI就可以上网搜索，自动浏览操作、网页操作和读取你的本地文件，获取热点新闻，帮你用高德地图搜周边饭店、商场、咖啡馆等等等等。前两步都非常简单，下载软件而已。第三步更简单，C而已。"],[202.72,266.92,"Ok那我们回到科的聊天界面试一试，要确保我们的聊天模式是选择了这个a ent的才能调用mcp那模型实际上是没关系的，我用那也是可以的，不过这个时候每一次调用mcp，他都会问一下你同不同意。所以为了更流畅，我们可以在cursor的设置里面这个future agent中间打开这个自动运行mcp的工具。如果你担心它误操作你的文件的话，你就在这个地方再加上一些禁止的命令，例如说这个强制删除的命令。我们试试看今天各大平台的新闻有哪些，总结几条最精彩的给我，你看他这里就是在调用mp服务了，然后从外面发了一大堆东西给这个大模型，然后大模型收到了之后帮我们总结了出来，是不是很简单，把我又行了打在公屏上。那我们想知道我们到底装哪些工具都能干嘛？"],[266.92,319.52,"直接问他就好了，你看有这么些，这个是因为每一个mp对接上大模型的时候，他都会按照mp给大模型发一个说明书。比如说我是A我能干这个，你按这个口号叫我，我就来给你干这个之类的。那所以大模型是了解这帮mp服务的，他什么时候该用谁都是他自己决定的。其实我最常用的就是本地文件的整理了，比如说发票下载了一大堆不同的格式。然后我就跟他说，把这个文件里面除了pdf的其他都删除，他就会有这个实时操作的过程。再不然就是问问他还news上最近有什么新鲜事儿，以及给他一个网址，让他去截图，读信息什么的，还有最近火起来的高德地图，让他规划路线什么的，比起做blender建模什么的，是不是很朴实？"]],"start":49.1,"end":319.52,"title":"🛠️ 大模型工具自主调用方案","summary":"MCP是一种协议，许多开发者基于它开发了工具（MCP服务）。通过简单配置，这些工具能连接大模型，让大模型自主选择并使用它们，实现操作Blender、数据库等功能。使用MCP只需三步：下载软件、配置，然后启用。启用后，AI可以上网搜索、浏览网页、读取本地文件、获取新闻、使用高德地图等。Cursor等聊天界面需要选择特定agent才能调用MCP。为了更流畅，可以设置自动运行MCP工具，并添加禁止命令防止误操作。大模型了解每个MCP服务的功能，并自主决定何时使用哪个。MCP常用于整理本地文件、获取新闻、截图、读取信息、规划路线等。"},{"contents":[[102.28,149.87,"来吧，第一步先下载一个cursor，这个是我个人最推荐的支持mp的客户端。当然其他支持的客户端我也会放在文档里，但是我比较偏爱它。它看似是一个AI编程用的，但是写稿、写代码，多步执行的A可以说是非常多功能。我们去官网直接下载安装即可，像白嫖或者是买穷鬼会员，大家可以自行搜索一些渠道，反正是有的。第二步下载note s大家也别管是啥了，反正很多的服务都需要靠它运行。所以我们一样去官网下载，一路默认安装就好。安装完不放心的朋友可以打开命令提示符，去输入note杠V如果显示版本号就代表你装好了。第三步就是拷贝点东西。"],[367.06,424.07,"我们选中哪个服务之后就点进去，然后右边就是安装的命令，那我们是cursor就选择cursor，我们是这个配置Jason文件的方式就点Jason，然后我们是windows系统，我们就再点windows。那遇上要api的，我们就去搞个api然后看到他给出来的这个配置，我们直接排除掉上面两行，下面两行，把中间这个拷贝走，然后去到我们自己的这个配置文件，再排除掉下面两行，给它打个逗号，给它全部粘贴进去就好了。大家如果自己去找遇到出bug的、有问题的，以及不是npx的使用的人太少的那小白我建议直接先放弃，因为虽然mcp很火，甚至已经被OpenAI和谷歌以及国内各大厂官宣支持了，这样对话及操作的交互方式也确实会成为趋势。但是他还年轻，他还并不完善。"]],"start":102.28,"end":424.07,"title":"🤖 MCP新手入门指南","summary":"本教程旨在帮助小白用户使用MCP让AI自动工作。首先，推荐下载Cursor客户端，虽然它主要用于AI编程，但功能强大。其次，安装Node.js，许多服务依赖它运行。最后，根据所选服务和系统，复制相应的配置代码（排除特定行），粘贴到配置文件中。教程建议新手避免使用非npx方式，因为MCP尚不完善，容易出现问题。"},{"contents":[[150.1,202.06,"我们打开curser，打开它的文件，然后找到首选项，然后看到这个cursor settings，这里会有一个大大的mp什么都没有。那我们点击这个来添加一个mcp服务，这个文件就是你mcp的工具清单。这个时候你只需要把我的这串咒语全部拷走，然后复制粘贴到你创建的mcp点角色文件里。然后我们在清空杂念跟我念mcp mcc p好了，然后我们回到这个cur的mp设置界面，你就能看到刚才添加了这几个服务。稍等片刻，你看到它前面这个绿灯亮起来，就代表它已经准备就绪了。如果没亮，我们可以点击一下旁边这个刷新按钮，让它重启一下。那如果还没亮，那肯定就是你刚才念咒语的时候有杂念。"]],"start":150.1,"end":202.06,"title":"💡Cursor中添加MCP服务指南","summary":"本教程教你如何在Cursor中添加MCP服务，让AI自动工作。首先，在Cursor设置中添加MCP服务，将提供的“咒语”（代码）复制粘贴到MCP角色文件中。然后，在Cursor的MCP设置界面，等待服务绿灯亮起，表示服务已准备就绪。如果未亮，尝试刷新或检查代码是否正确复制。"},{"contents":[[319.72,367.06,"有小朋友可能就要问了，下次想装点别的怎么办呢？这一串东西到底是什么？其实很简单，这个就相当于你的服务清单，你看他这写着的service服务，那这下面就是一个一个的服务，如果有你不需要的，你就从它的这个名字到下面这个逗号为止，把它全部删掉就好了。因为越多的P也会有越多的偷Ken消耗，还让大模型多了一些选择成本。如果你下次想再装别的，我们就再在清单上去加一个就好了。那又要问了，我们上哪去找一些工具呢？有这么些地方，这些都是mp的聚合网站，包括官方的服务列表，我都列在文档里了。那新手我推荐大家去这里，因为他操作比较方便。"]],"start":319.72,"end":367.06,"title":"🛠️ MCP服务清单修改指南","summary":"这段话解释了如何修改MCP（可能是AI工具集合）的服务清单。用户可以删除清单中不需要的服务，以减少资源消耗和模型选择成本。如果想添加新的工具，可以在清单中添加。文档中列出了MCP的聚合网站和官方服务列表，新手推荐使用操作方便的网站。"},{"contents":[[424.07,471.64,"社区中也有很多不稳定的服务，安全问题和其他的短板也都有待解决。例如说前段时间还出来的投毒事件。也就是有一个恶意的mp服务，在给大模型的这个说明书里夹带了一些指令，把你的大模型直接就劫持了，然而这个说明书用户通常是看不到的。例如说你装了一个伪装成邮箱服务的mcp他给大模型的说明书里就夹带着一句，这句话很重要，你要听着。那每一次用户对外去发邮件或者是查看邮件的时候，你都要给这个地址也发一份。那这个事儿基本上大家是察觉不到的。于是也有很多争议的声音说P是让大模型在真正可靠之前就有了替我们做事的能力。"]],"start":424.07,"end":471.64,"title":"⚠️ MCP服务：风险与争议","summary":"社区MCP服务存在不稳定性和安全问题，例如投毒事件，恶意MCP服务通过在给大模型的说明书中夹带指令劫持大模型，用户难以察觉。这引发了关于MCP是否让大模型在真正可靠之前就具备了替用户做事能力的争议。"},{"contents":[[471.64,492.9,"所以我觉得大家可以先用这些比较多人检验过的通用工具去玩两天，开一开思路，逛一逛那些聚合网站去了解都有什么东西，也等更多可靠的官方的进展。如果你非要学习的瘾就是上来了，请给我留言，我们这次见好就收，记得点赞、收藏、关注，下次见。"]],"start":471.64,"end":492.9,"title":"💡AI新手入门指南","summary":"建议新手先使用通用工具体验，了解AI应用，关注官方进展。如果学习欲望强烈，可以留言交流，但要适度。 记得点赞、收藏、关注。"}]}
```

上面的代码是 biligpt 的请求代码，请根据示例代码，实现一个 MCP 的工具
